---
title: MongoDB
description: MongoDB est une base de donn√©es NoSQL orient√©e documents, con√ßue pour la scalabilit√© et la flexibilit√©. Ce guide r√©pertorie les commandes essentielles et les bonnes pratiques.
---

## üöÄ Commandes MongoDB Shell

### Navigation et Connexion

| Commande                              | Description                          |
| ------------------------------------- | ------------------------------------ |
| `mongosh`                             | D√©marrer le shell MongoDB            |
| `mongosh "mongodb://localhost:27017"` | Se connecter avec une URI            |
| `show dbs` ou `show databases`        | Lister toutes les bases de donn√©es   |
| `use nom_db`                          | Basculer vers une base de donn√©es    |
| `db`                                  | Afficher la base de donn√©es courante |
| `db.getName()`                        | Obtenir le nom de la base courante   |
| `exit` ou `quit()`                    | Quitter le shell MongoDB             |
| `cls`                                 | Effacer l'√©cran                      |
| `db.getMongo()`                       | Obtenir l'objet de connexion         |

### Exploration des Collections

| Commande                                 | Description                           |
| ---------------------------------------- | ------------------------------------- |
| `show collections`                       | Lister toutes les collections         |
| `db.getCollectionNames()`                | Lister les collections (format array) |
| `db.collection.countDocuments()`         | Compter les documents                 |
| `db.collection.estimatedDocumentCount()` | Estimation rapide du nombre           |
| `db.collection.stats()`                  | Statistiques d√©taill√©es               |
| `db.collection.dataSize()`               | Taille des donn√©es                    |
| `db.collection.totalIndexSize()`         | Taille des index                      |
| `db.collection.getIndexes()`             | Lister les index                      |
| `db.stats()`                             | Statistiques de la base               |
| `db.serverStatus()`                      | √âtat du serveur                       |

### Gestion des Utilisateurs

| Commande          | Description                      |
| ----------------- | -------------------------------- |
| `show users`      | Lister les utilisateurs de la DB |
| `show roles`      | Lister les r√¥les disponibles     |
| `db.getUsers()`   | D√©tails des utilisateurs         |
| `db.getRoles()`   | D√©tails des r√¥les                |
| `db.currentOp()`  | Op√©rations en cours              |
| `db.killOp(opid)` | Tuer une op√©ration               |
| `db.version()`    | Version de MongoDB               |
| `db.hostInfo()`   | Informations sur l'h√¥te          |

### Commandes d'Aide

| Commande                      | Description                         |
| ----------------------------- | ----------------------------------- |
| `help`                        | Aide g√©n√©rale                       |
| `db.help()`                   | Aide sur les m√©thodes de base       |
| `db.collection.help()`        | Aide sur les m√©thodes de collection |
| `db.collection.find().help()` | Aide sur les curseurs               |
| `load("script.js")`           | Charger un script JavaScript        |
| `print()`                     | Afficher dans la console            |
| `printjson()`                 | Afficher en format JSON             |
| `typeof`                      | Type d'une variable                 |

## üìä Op√©rations CRUD

### Insertion (Create)

```javascript
// Insertion simple
db.users.insertOne({ name: "Jean", email: "jean@example.com", age: 30 });

// Insertion multiple
db.users.insertMany([
  { name: "Alice", email: "alice@example.com", tags: ["premium"] },
  { name: "Bob", email: "bob@example.com", age: 35 },
]);

// Bulk Insert pour performance
db.logs.bulkWrite([
  { insertOne: { document: { event: "login", timestamp: new Date() } } },
]);
```

### Lecture (Read)

```javascript
// Recherche basique
db.users.find({ age: { $gte: 25 } });
db.users.findOne({ email: "alice@example.com" });

// Op√©rateurs de requ√™te
db.products.find({ $or: [{ price: { $lt: 100 } }, { category: "tech" }] });
db.users.find({ tags: { $all: ["premium", "active"] } });
db.users.find({ "address.city": "Paris" });

// Curseur et m√©thodes
db.users.find().sort({ age: -1 }).limit(10).skip(20);
db.users.countDocuments({ age: { $gte: 25 } });
```

### Mise √† jour (Update)

```javascript
// UpdateOne/UpdateMany
db.users.updateOne(
  { email: "jean@example.com" },
  { $set: { age: 31, updatedAt: new Date() } }
);

// Op√©rateurs essentiels
db.products.updateOne({ name: "Laptop" }, { $inc: { stock: -1 } });
db.users.updateOne({ email: "alice@example.com" }, { $push: { tags: "vip" } });
db.users.updateOne(
  { email: "alice@example.com" },
  { $addToSet: { tags: "newsletter" } }
);

// Upsert
db.users.updateOne(
  { email: "new@example.com" },
  { $set: { name: "Nouveau User" } },
  { upsert: true }
);
```

### Suppression (Delete)

```javascript
// Suppression simple
db.users.deleteOne({ email: "test@example.com" });
db.users.deleteMany({ status: "inactive" });

// Suppression avec condition
db.logs.deleteMany({
  timestamp: { $lt: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000) },
});

// FindOneAndDelete
db.users.findOneAndDelete({ email: "old@example.com" });
```

## üìö Ressources Utiles

- [Documentation officielle MongoDB](https://docs.mongodb.com/)
- [MongoDB Manual](https://docs.mongodb.com/manual/)
- [MongoDB University](https://university.mongodb.com/)
- [MongoDB Compass](https://www.mongodb.com/products/compass) - Interface graphique
- [MongoDB Shell (mongosh)](https://docs.mongodb.com/mongodb-shell/)

---

_Ce guide est un document vivant. N'h√©sitez pas √† le compl√©ter avec vos propres d√©couvertes et cas d'usage !_
